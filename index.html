<!doctype html>
<html>

<head>
        <title>LucasCôrtes.com.br</title>
        <link rel="shortcut icon" href="img/favicon.ico">
        <link rel="icon" type="image/png" href="img/favicon.png" sizes="32x32">
        <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
        <meta name="msapplication-TileImage" content="img/mstile-144x144.png">
        <meta name="msapplication-TileColor" content="#3b0055">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css?family=Mulish&display=swap" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<style>
        * {transition: 0.1s;}
        body {background-color:#3b0055;margin:0;font-family: "Mulish", sans-serif;}
        audio {display:none;}
        a {color:#eeefca;}
        p {min-width:100%;max-width:100%;margin:0 auto;font-size:12px;text-align:center;color:#f5ce1b;}
        img {width:100%;height:auto;}
        img.social {max-width:36px;height:36px;vertical-align:top;}
        #container {text-align:center;}
        #sequenciador {min-width:100%;max-width:100%;display:inline-block;}
        #passoscontainer {max-width:100%;display:inline-block;}
        .passowrapper {width:30px;display:inline-block;margin-right:5px;}
        .ticwrapper {display:inline-block;margin:0px 5px;margin-left:7px;}
        .tic {width:4.5px;height:4.5px;border-radius:34px;margin:0 auto;background-color:red;}
        .passo {display:inline-block;width:30px;height:30px;background-color:#f5ce1b;border:3px solid #eeefca;border-radius:9px;}
        #controles {min-width:100%;max-width:100%;display:inline-block;margin-top:3px;}
        .linha {min-width:100%;max-width:100%;display:inline-block;}
        .controle {text-align:center;cursor:pointer;user-select:none;display:inline-block;width:34px;height:34px;margin:5px auto;padding:5px 34px;line-height:30px;vertical-align:middle;background-color:#f5ce1b;border:3px solid #eeefca;border-radius:9px;}
        .menor {width:5px;}
        .maior {width:90px;}
        .imgcontrole {max-width:26px;height:26px;vertical-align:middle;}
        .ativo, .tocando, .pausado, #controles .controle:active {background-color:#eeefca;}
        .passo.ativo {box-shadow: 0px -113px 25px -130px rgba(0,0,0,0.75) inset;}
        .tic.ativo {background-color:#f5ce1b;}
        #bottomcontainer {position:fixed;bottom:0;left:0;right:0;}
        #sidecontainer {position:absolute;top:18vh;right:13px;}
        #sidecontainer div {margin:21px 13px;}
        @media screen and (max-width: 600px) {
                #sidecontainer {margin-top:65vh;}
                #sidecontainer div {margin:13px 8px;display:inline-block;}
                #sidecontainerwrap {display:inline-block;}
        }
</style>

<body>

<div style='margin-top:13vh;text-align:center;'>
        <div style='min-width:100%;max-width:100%;display:inline-block;'>
                <img style='max-width:320px;' src='img/logo.png'></img>
        </div>
</div>

<div id='container'>
        <div id='sequenciador'>
                <div id='passoscontainer'>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_01' class='ticwrapper 01'>
                                        <p id='tic_01' class='tic 01'></p>
                                </div>
                                <div id='passo_01' class='passo 01'>
                                        <audio id='audio_01' class='01' name='play' src='audio/01/audio_01_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_02' class='ticwrapper 01'>
                                        <p id='tic_02' class='tic 01'></p>
                                </div>
                                <div id='passo_02' class='passo 01'>
                                        <audio id='audio_02' class='01' name='play' src='audio/01/audio_01_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_03' class='ticwrapper 01'>
                                        <p id='tic_03' class='tic 01'></p>
                                </div>
                                <div id='passo_03' class='passo 01'>
                                        <audio id='audio_03' class='01' name='play' src='audio/01/audio_01_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_04' class='ticwrapper 01'>
                                        <p id='tic_04' class='tic 01'></p>
                                </div>
                                <div id='passo_04' class='passo 01'>
                                        <audio id='audio_04' class='01' name='play' src='audio/01/audio_01_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_05' class='ticwrapper 01'>
                                        <p id='tic_05' class='tic 01'></p>
                                </div>
                                <div id='passo_05' class='passo 01'>
                                        <audio id='audio_05' class='01' name='play' src='audio/01/audio_01_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_06' class='ticwrapper 01'>
                                        <p id='tic_06' class='tic 01'></p>
                                </div>
                                <div id='passo_06' class='passo 01'>
                                        <audio id='audio_06' class='01' name='play' src='audio/01/audio_01_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_07' class='ticwrapper 01'>
                                        <p id='tic_07' class='tic 01'></p>
                                </div>
                                <div id='passo_07' class='passo 01'>
                                        <audio id='audio_07' class='01' name='play' src='audio/01/audio_01_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_08' class='ticwrapper 01'>
                                        <p id='tic_08' class='tic 01'></p>
                                </div>
                                <div id='passo_08' class='passo 01'>
                                        <audio id='audio_08' class='01' name='play' src='audio/01/audio_01_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
                <div id='passoscontainer'>
                        <div class='passowrapper 02'>
                                <div id='passo_01' class='passo 02'>
                                        <audio id='audio_01' class='02' name='play' src='audio/02/audio_02_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_02' class='passo 02'>
                                        <audio id='audio_02' class='02' name='play' src='audio/02/audio_02_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_03' class='passo 02'>
                                        <audio id='audio_03' class='02' name='play' src='audio/02/audio_02_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_04' class='passo 02'>
                                        <audio id='audio_04' class='02' name='play' src='audio/02/audio_02_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_05' class='passo 02'>
                                        <audio id='audio_05' class='02' name='play' src='audio/02/audio_02_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_06' class='passo 02'>
                                        <audio id='audio_06' class='02' name='play' src='audio/02/audio_02_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_07' class='passo 02'>
                                        <audio id='audio_07' class='02' name='play' src='audio/02/audio_02_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_08' class='passo 02'>
                                        <audio id='audio_08' class='02' name='play' src='audio/02/audio_02_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
                <div id='passoscontainer'>
                        <div class='passowrapper 03'>
                                <div id='passo_01' class='passo 03'>
                                        <audio id='audio_01' class='03' name='play' src='audio/03/audio_03_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_02' class='passo 03'>
                                        <audio id='audio_02' class='03' name='play' src='audio/03/audio_03_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_03' class='passo 03'>
                                        <audio id='audio_03' class='03' name='play' src='audio/03/audio_03_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_04' class='passo 03'>
                                        <audio id='audio_04' class='03' name='play' src='audio/03/audio_03_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_05' class='passo 03'>
                                        <audio id='audio_05' class='03' name='play' src='audio/03/audio_03_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_06' class='passo 03'>
                                        <audio id='audio_06' class='03' name='play' src='audio/03/audio_03_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_07' class='passo 03'>
                                        <audio id='audio_07' class='03' name='play' src='audio/03/audio_03_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_08' class='passo 03'>
                                        <audio id='audio_08' class='03' name='play' src='audio/03/audio_03_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
                <div id='passoscontainer'>
                        <div class='passowrapper 04'>
                                <div id='passo_01' class='passo 04'>
                                        <audio id='audio_01' class='04' name='play' src='audio/04/audio_04_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_02' class='passo 04'>
                                        <audio id='audio_02' class='04' name='play' src='audio/04/audio_04_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_03' class='passo 04'>
                                        <audio id='audio_03' class='04' name='play' src='audio/04/audio_04_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_04' class='passo 04'>
                                        <audio id='audio_04' class='04' name='play' src='audio/04/audio_04_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_05' class='passo 04'>
                                        <audio id='audio_05' class='04' name='play' src='audio/04/audio_04_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_06' class='passo 04'>
                                        <audio id='audio_06' class='04' name='play' src='audio/04/audio_04_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_07' class='passo 04'>
                                        <audio id='audio_07' class='04' name='play' src='audio/04/audio_04_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_08' class='passo 04'>
                                        <audio id='audio_08' class='04' name='play' src='audio/04/audio_04_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
        </div> <!-- sequenciador -->
        <div id='controles'>
                <div class='linha'>
                        <div id='tocar' class='controle'>
                                <img class='imgcontrole' src='img/sequenciador/tocar.png'></img>
                        </div>
                        <div id='pausar' class='controle'>
                                <img class='imgcontrole' src='img/sequenciador/pausar.png'></img>
                        </div>
                        <div id='parar' class='controle'>
                                <img class='imgcontrole' src='img/sequenciador/parar.png'></img>
                        </div>
                </div> <!-- linha -->
                <div class='linha'>
                        <div id='limpar' class='controle'>
                                <!-- <img class='imgcontrole' src='img/limpar.png'></img> -->
                                <p style='color:#3b0055;font-size:18px;'>limp.</p>
                        </div>
                        <div id='aleatorio' class='controle'>
                                <p style='color:#3b0055;font-size:18px;'>aleat.</p>
                        </div>
                </div> <!-- linha -->
                <div class='linha'>
                        <p>BPM</p>
                        <input id='velocidade' type='number' value='180' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                </div> <!-- linha -->
        </div> <!-- controles -->
</div> <!-- container -->

<div id='sidecontainer'>
        <div id='sidecontainerwrap'>
                <div>
                        <a target='_blank' href='https://open.spotify.com/artist/2cHZgbZDJncmSN7BEKOB4x'>
                                <img class='social' src='img/social/bandcamp.png'></img>
                        </a>
                </div>
                <div>
                        <a target='_blank' href='https://lucascortes.bandcamp.com/'>
                                <img class='social' src='img/social/spotify.png'></img>
                        </a>
                </div>
                <div>
                        <a target='_blank' href='https://lcscrts.medium.com'>
                                <img class='social' src='img/social/medium.png'></img>
                        </a>
                </div>
                <div>
                        <a target='_blank' href='https://github.com/lucasmcortes'>
                                <img class='social' src='img/social/github.png'></img>
                        </a>
                </div>
        </div>
</div>

<div id='bottomcontainer'>
        <div class='linha'>
                <p style='padding:1.8% 0px;'>
                        © Lucas Côrtes <?php echo date('Y'); ?>
                </p>
        </div>
</div>

<script>
        /* lista de instrumentos */
        instrumentos = [];
        $('audio').each(function() {
        instrumentos.push($(this).attr('class'));
        });
        /* pega só os unique entries do array */
        instrumentos = instrumentos.filter((x, i, a) => a.indexOf(x) == i);
        /* exemplo: instrumentos[0] = bateria */
        banda = instrumentos.length;
        /* lista de instrumentos */

        /* velocidade */
        velInput = $('#velocidade');
        velocidade = 1000 * 60 /  velInput.val();
        velInput.on('change', function () {
        velocidade = 1000 * 60 /  velInput.val();
        Pausar();
        Tocar();
        });
        /* velocidade */

        /* conta os passos */
        numPassos = $('.passo').length;
        ticAtual = 00;
        caminhada = 0;

        /* adiciona todos os ids dos passos num array */
        Passos = [];
        $('.passo').each(function() {
         Passos.push($(this).attr('id').split('_')[1]);
        });

        /* ativa passo */
        $('.passo').on('click', function() {
        $(this).toggleClass('ativo');
        });
        /* ativa passo */

        /* desativa passos */
        function desativaPassos() {
        $('.passo').each(function() {
                $(this).removeClass('ativo');
        });
        }
        /* desativa passos */

        /* desativa tics */
        function desativaTics() {
        $('.tic').each(function() {
                $(this).removeClass('ativo');
        });
        }
        /* desativa tics */

        /* maestro */
        function Maestro() {
        desativaTics();
        $('#tic_' + Passos[batuta]).addClass('ativo');
        for (inst=0;inst<banda;inst++) {
                if ($('#passo_' + Passos[batuta] + '.' + instrumentos[inst]).hasClass('ativo')) {
                        /* se o passo desse tic respectivo tá marcado */
                        $('#audio_' + Passos[batuta] + '.' + instrumentos[inst])[0].play();
                }
        }
        batuta++;
        if (batuta==numPassos) {batuta=00;}
        }
        /* maestro */

        /* move tics */
        function moveTics() {
        /* se tá pausado/parado, toca */
        if ($('#tocar').hasClass('tocando')==false) {
                $('#pausar').removeClass('pausado');
                batuta = ticAtual;
                if (batuta!==00) {
                        /* arruma o contador pra continuar de onde pausou */
                        batuta = (ticAtual-1);
                }
                caminhada = setInterval(function(batuta) {
                        Maestro(batuta);
                }, velocidade);
        } else {
                /* se tá tocando */
                $('#pausar').removeClass('pausado');
        }
        }
        /* move tics */

        /* parar os tics */
        function pararTics() {
        clearInterval(caminhada);
        }
        /* parar os tics */

        /* tocar */
        function Tocar() {
        moveTics();
        $('#tocar').addClass('tocando');
        }
        $('#tocar').on('click', function () {
        Tocar();
        });
        /* tocar */

        /* pausar */
        function Pausar() {
        pararTics();
        ticAtual = $('.tic.ativo').attr('id').split('_')[1];
        $('#tocar').removeClass('tocando');
        $('#pausar').addClass('pausado');
        }
        $('#pausar').on('click', function () {
        Pausar();
        });
        /* pausar */

        /* parar */
        function Parar() {
        pararTics();
        desativaTics();
        $('#tocar').removeClass('tocando');
        $('#pausar').removeClass('pausado');
        $('#tic_01').addClass('ativo');
        ticAtual = 00;
        }
        $('#parar').on('click', function () {
        Parar();
        });
        /* parar */

        /* limpar passos */
        function Limpar() {
        desativaPassos();
        ticAtual = 00;
        }
        $('#limpar').on('click', function () {
        Limpar();
        });
        /* limpar passos */

        /* inicializa com passos marcados */
        function randomPassos() {
        for (inst=0;inst<banda;inst++) {
                Random = Math.floor(Math.random() * numPassos);
                $('#passo_' + Passos[Random] + '.' + instrumentos[inst]).addClass('ativo');
        }
        }
        randomPassos();
        $('#aleatorio').on('click', function () {
        Limpar();
        randomPassos();
        });
        /* inicializa com passos marcados */

        /* bota o primeiro tic aceso */
        $('#tic_01').addClass('ativo');
        /* bota o primeiro tic aceso */
</script>

</body>
</html>
