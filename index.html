<!doctype html>
<html>

<head>
        <title>LucasCôrtes.com.br</title>
        <link rel="shortcut icon" href="img/favicon.ico">
        <link rel="icon" type="image/png" href="img/favicon.png" sizes="32x32">
        <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
        <meta name="msapplication-TileImage" content="img/mstile-144x144.png">
        <meta name="msapplication-TileColor" content="#3b0055">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css?family=Mulish&display=swap" rel="stylesheet">
        <script src="jquery.min.js"></script>
        <script src="jquery-ui.js"></script>
</head>

<style>
        * {transition: 0.1s;user-select:none;}
        body {background-color:#3b0055;margin:0;font-family: "Mulish", sans-serif;}
        audio {display:none;}
        a {color:#eeefca;}
        p {min-width:100%;max-width:100%;margin:0 auto;font-size:12px;text-align:center;color:#f5ce1b;}
        img {width:100%;height:auto;}
        img.social {max-width:36px;height:36px;vertical-align:top;}
        #container {margin-top:8px;text-align:center;}
        #sequenciador {min-width:100%;max-width:100%;display:inline-block;}
        #passoscontainer {max-width:100%;display:inline-block;}
        .passowrapper {width:30px;display:inline-block;margin-right:5px;}
        .ticwrapper {display:inline-block;margin:0px 5px;margin-left:11.23px;}
        .tic {width:4.5px;height:4.5px;border-radius:34px;margin:0 auto;background-color:red;}
        .passo {display:inline-block;width:30px;height:30px;background-color:#f5ce1b;border:3px solid #eeefca;border-radius:9px;}
        #controles {min-width:100%;max-width:100%;display:inline-block;margin-top:3px;}
        .linha {min-width:100%;max-width:100%;display:inline-block;}
        .node {display:inline-block;}
        .controle {text-align:center;cursor:pointer;user-select:none;display:inline-block;width:34px;height:34px;margin:5px auto;padding:5px 34px;line-height:30px;vertical-align:middle;background-color:#f5ce1b;border:3px solid #eeefca;border-radius:9px;}
        .menor {width:23px;}
        .maior {width:90px;}
        .imgcontrole {width:26px;max-width:26px;height:26px;vertical-align:middle;}
        .ativo, .tocando, .pausado, #controles .controle:active {background-color:#eeefca;}
        .passo.ativo {box-shadow: 0px -113px 25px -130px rgba(0,0,0,0.75) inset;}
        .tic.ativo {background-color:#f5ce1b;}
        #bottomcontainer {position:fixed;bottom:0;left:0;right:0;background-color:#3b0055;}
        #pianinho {text-align:center;width:auto;margin:1.8% auto;}
        .tecla {display:inline-block;height:90px;margin:0 auto;width:36px;background-color:#eeefca;vertical-align:top;border:1px solid #eeefca;}
        .sustenido {background-color:#3b0055;position:relative;width:26px;height:72px;}
        .tecla:hover, .tocada {background-color:#f5ce1b;}
        .tecla:not(:first-child) {margin-left:-16.1px;}

        #sidecontainer {position:fixed;top:15vh;right:13px;}
        #sidecontainer div {margin:21px 13px;}
        @media screen and (max-width: 600px) {
                #sidecontainer {position:fixed;min-width:100%;max-width:100%;margin-top:82vh;top:0;right:0;text-align:center;}
                #sidecontainer div {margin:13px 8px;display:inline-block;}
                #sidecontainerwrap {display:inline-block;}
        }
</style>

<body>

<div style='margin-top:5vh;text-align:center;'>
        <div style='min-width:100%;max-width:100%;display:inline-block;'>
                <img style='max-width:320px;' src='img/logo.png'></img>
        </div>
</div>

<div id='container'>
        <div id='sequenciador'>
                <div id='passoscontainer'>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_01' class='ticwrapper 01'>
                                        <p id='tic_01' class='tic 01'></p>
                                </div>
                                <div id='passo_01' class='passo 01'>
                                        <audio id='audio_01' class='01' name='play' src='audio/01/audio_01_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_02' class='ticwrapper 01'>
                                        <p id='tic_02' class='tic 01'></p>
                                </div>
                                <div id='passo_02' class='passo 01'>
                                        <audio id='audio_02' class='01' name='play' src='audio/01/audio_01_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_03' class='ticwrapper 01'>
                                        <p id='tic_03' class='tic 01'></p>
                                </div>
                                <div id='passo_03' class='passo 01'>
                                        <audio id='audio_03' class='01' name='play' src='audio/01/audio_01_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_04' class='ticwrapper 01'>
                                        <p id='tic_04' class='tic 01'></p>
                                </div>
                                <div id='passo_04' class='passo 01'>
                                        <audio id='audio_04' class='01' name='play' src='audio/01/audio_01_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_05' class='ticwrapper 01'>
                                        <p id='tic_05' class='tic 01'></p>
                                </div>
                                <div id='passo_05' class='passo 01'>
                                        <audio id='audio_05' class='01' name='play' src='audio/01/audio_01_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_06' class='ticwrapper 01'>
                                        <p id='tic_06' class='tic 01'></p>
                                </div>
                                <div id='passo_06' class='passo 01'>
                                        <audio id='audio_06' class='01' name='play' src='audio/01/audio_01_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_07' class='ticwrapper 01'>
                                        <p id='tic_07' class='tic 01'></p>
                                </div>
                                <div id='passo_07' class='passo 01'>
                                        <audio id='audio_07' class='01' name='play' src='audio/01/audio_01_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 01'>
                                <div id='ticwrapper_08' class='ticwrapper 01'>
                                        <p id='tic_08' class='tic 01'></p>
                                </div>
                                <div id='passo_08' class='passo 01'>
                                        <audio id='audio_08' class='01' name='play' src='audio/01/audio_01_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
                <div id='passoscontainer'>
                        <div class='passowrapper 02'>
                                <div id='passo_01' class='passo 02'>
                                        <audio id='audio_01' class='02' name='play' src='audio/02/audio_02_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_02' class='passo 02'>
                                        <audio id='audio_02' class='02' name='play' src='audio/02/audio_02_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_03' class='passo 02'>
                                        <audio id='audio_03' class='02' name='play' src='audio/02/audio_02_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_04' class='passo 02'>
                                        <audio id='audio_04' class='02' name='play' src='audio/02/audio_02_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_05' class='passo 02'>
                                        <audio id='audio_05' class='02' name='play' src='audio/02/audio_02_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_06' class='passo 02'>
                                        <audio id='audio_06' class='02' name='play' src='audio/02/audio_02_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_07' class='passo 02'>
                                        <audio id='audio_07' class='02' name='play' src='audio/02/audio_02_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 02'>
                                <div id='passo_08' class='passo 02'>
                                        <audio id='audio_08' class='02' name='play' src='audio/02/audio_02_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
                <div id='passoscontainer'>
                        <div class='passowrapper 03'>
                                <div id='passo_01' class='passo 03'>
                                        <audio id='audio_01' class='03' name='play' src='audio/03/audio_03_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_02' class='passo 03'>
                                        <audio id='audio_02' class='03' name='play' src='audio/03/audio_03_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_03' class='passo 03'>
                                        <audio id='audio_03' class='03' name='play' src='audio/03/audio_03_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_04' class='passo 03'>
                                        <audio id='audio_04' class='03' name='play' src='audio/03/audio_03_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_05' class='passo 03'>
                                        <audio id='audio_05' class='03' name='play' src='audio/03/audio_03_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_06' class='passo 03'>
                                        <audio id='audio_06' class='03' name='play' src='audio/03/audio_03_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_07' class='passo 03'>
                                        <audio id='audio_07' class='03' name='play' src='audio/03/audio_03_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 03'>
                                <div id='passo_08' class='passo 03'>
                                        <audio id='audio_08' class='03' name='play' src='audio/03/audio_03_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
                <div id='passoscontainer'>
                        <div class='passowrapper 04'>
                                <div id='passo_01' class='passo 04'>
                                        <audio id='audio_01' class='04' name='play' src='audio/04/audio_04_01.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_02' class='passo 04'>
                                        <audio id='audio_02' class='04' name='play' src='audio/04/audio_04_02.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_03' class='passo 04'>
                                        <audio id='audio_03' class='04' name='play' src='audio/04/audio_04_03.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_04' class='passo 04'>
                                        <audio id='audio_04' class='04' name='play' src='audio/04/audio_04_04.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_05' class='passo 04'>
                                        <audio id='audio_05' class='04' name='play' src='audio/04/audio_04_05.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_06' class='passo 04'>
                                        <audio id='audio_06' class='04' name='play' src='audio/04/audio_04_06.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_07' class='passo 04'>
                                        <audio id='audio_07' class='04' name='play' src='audio/04/audio_04_07.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                        <div class='passowrapper 04'>
                                <div id='passo_08' class='passo 04'>
                                        <audio id='audio_08' class='04' name='play' src='audio/04/audio_04_08.wav' type='audio/mp3'></audio>
                                </div>
                        </div>
                </div> <!-- passos container -->
                <br>
        </div> <!-- sequenciador -->
        <div id='controles'>
                <div class='linha'>
                        <div id='tocar' class='controle menor'>
                                <img class='imgcontrole' src='img/sequenciador/tocar.png'></img>
                        </div>
                        <div id='pausar' class='controle menor'>
                                <img class='imgcontrole' src='img/sequenciador/pausar.png'></img>
                        </div>
                        <div id='parar' class='controle menor'>
                                <img class='imgcontrole' src='img/sequenciador/parar.png'></img>
                        </div>
                </div> <!-- linha -->
                <div class='linha'>
                        <div id='limpar' class='controle' style='width:auto;'>
                                <!-- <img class='imgcontrole' src='img/limpar.png'></img> -->
                                <p style='color:#3b0055;font-size:15px;'>limpar</p>
                        </div>
                        <div id='aleatorio' class='controle' style='width:auto;'>
                                <p style='color:#3b0055;font-size:15px;'>aleatório</p>
                        </div>
                </div> <!-- linha -->
                <div class='linha'>
                        <!-- <div class='node'> -->
                                <p>BPM</p>
                                <input id='velocidade' type='number' value='120' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        <!-- </div>  node -->
                        <!-- <div class='node'> -->
                                <p style='display:none;'>Osc. Dur.</p>
                                <input id='osc_dur' type='number' value='1' class='controle maior' style='font-size:18px;color:#3b0055;display:none;'></input>
                        <!-- </div> node -->
                </div> <!-- linha -->

                <div class='linha'>
                        <div id='pianinho'>
                                <div id='C3' class='tecla'></div>
                                <div id='C3S' class='tecla sustenido'></div>
                                <div id='D3' class='tecla'></div>
                                <div id='D3S' class='tecla sustenido'></div>
                                <div id='E3' class='tecla'></div>
                                <div id='F3' class='tecla' style='margin-left:0;'></div>
                                <div id='F3S' class='tecla sustenido'></div>
                                <div id='G3' class='tecla'></div>
                                <div id='G3S' class='tecla sustenido'></div>
                                <div id='A3' class='tecla'></div>
                                <div id='A3S' class='tecla sustenido'></div>
                                <div id='B3' class='tecla'></div>
                        </div> <!-- pianinho -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 01</p>
                                <div id='oscilador_C3' data-teclado='65' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='C3'>C3 (130.810 Hz)</p>
                                <input id='hertz_C3' type='number' value='130.810' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 02</p>
                                <div id='oscilador_C3S' data-teclado='87' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='C3S'>C3S (138.590 Hz)</p>
                                <input id='hertz_C3S' type='number' value='138.590' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 03</p>
                                <div id='oscilador_D3' data-teclado='83' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='D3'>D3 (146.830 Hz)</p>
                                <input id='hertz_D3' type='number' value='146.830' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 04</p>
                                <div id='oscilador_D3S' data-teclado='69' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='D3S'>D3S (155.560 Hz)</p>
                                <input id='hertz_D3S' type='number' value='155.560' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 05</p>
                                <div id='oscilador_E3' data-teclado='68' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='E3'>E3 (164.810 Hz)</p>
                                <input id='hertz_E3' type='number' value='164.810' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 06</p>
                                <div id='oscilador_F3' data-teclado='70' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='F3'>F3 (174.610 Hz)</p>
                                <input id='hertz_F3' type='number' value='174.610' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 07</p>
                                <div id='oscilador_F3S' data-teclado='84' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='F3S'>F3S (185.000 Hz)</p>
                                <input id='hertz_F3S' type='number' value='185.000' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 08</p>
                                <div id='oscilador_G3' data-teclado='71' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='G3'>G3 (196.000 Hz)</p>
                                <input id='hertz_G3' type='number' value='196.000' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 09</p>
                                <div id='oscilador_G3S' data-teclado='89' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='G3S'>G3S (207.650 Hz)</p>
                                <input id='hertz_G3S' type='number' value='207.650' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 10</p>
                                <div id='oscilador_A3' data-teclado='72' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='A3'>A3 (220.000 Hz)</p>
                                <input id='hertz_A3' type='number' value='220.000' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 11</p>
                                <div id='oscilador_A3S' data-teclado='85' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='A3S'>A3S (233.080 Hz)</p>
                                <input id='hertz_A3S' type='number' value='233.080' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->

                <div class='linha' style='display:none;'>
                        <div class='node'>
                                <p>Osc 12</p>
                                <div id='oscilador_B3' data-teclado='74' class='controle osc' style='width:auto;'>
                                        <img class='imgcontrole osc1' src='img/sequenciador/tocar.png'></img>
                                </div>
                        </div> <!-- node -->
                        <div class='node'>
                                <p id='B3'>B3 (246.940 Hz)</p>
                                <input id='hertz_B3' type='number' value='246.940' class='controle maior' style='font-size:18px;color:#3b0055;'></input>
                        </div><!-- node -->
                </div> <!-- linha -->
        </div> <!-- controles -->
</div> <!-- container -->

<div class='linha'>
        <p style='color:#eeefca;margin:1.8% auto;margin-bottom:34%;'>
                sequência
                <br><br>
                sequências são determinadas pela sucessão de eventos, pela ação de seguir
                <br>
                um prosseguimento de ocorrências, uma depois da outra
                <br>
                por exemplo, uma música que tem vários sons em uma linha que o tempo segue
                <br><br>
                aqui você pode criar a sua própria e tocar junto com o teclado do seu computador
                <br>
                ou diretamente na sua tela (se tiver o recurso de toque)
                <br><br>
                criei alguns sons pra você poder usar na sua própria sequências
                <br>
                e você também tem um timbre peculiar pro teclado
                <br>
                escolha uma série de sons para acompanhar sua melodia
                <br>
                e escreva no tempo (com o teclado) como as coisas devem acompanhar
                <br>
                o que já está predefinido
        </p>
</div> <!-- linha -->

<div id='sidecontainer'>
        <div id='sidecontainerwrap'>
                <div>
                        <a target='_blank' href='https://lucascortes.bandcamp.com/'>
                                <img alt='bandcamp' title='bandcamp' class='social' src='img/social/bandcamp.png'></img>
                        </a>
                </div>
                <div>
                        <a target='_blank' href='https://open.spotify.com/artist/2cHZgbZDJncmSN7BEKOB4x'>
                                <img alt='spotify' title='spotify' class='social' src='img/social/spotify.png'></img>
                        </a>
                </div>
                <div>
                        <a target='_blank' href='https://lcscrts.medium.com'>
                                <img alt='medium' title='medium' class='social' src='img/social/medium.png'></img>
                        </a>
                </div>
                <div>
                        <a target='_blank' href='https://github.com/lucasmcortes'>
                                <img alt='github' title='github' class='social' src='img/social/github.png'></img>
                        </a>
                </div>
                <div>
                        <a target='_blank' href='mailto:lmattoscortes@gmail.com'>
                                <img alt='email' title='email' class='social' src='img/email-icon.png'></img>
                        </a>
                </div>
        </div>
</div>

<div id='bottomcontainer'>
        <div class='linha'>
                <p style='padding:1.8% 0px;'>
                        © Lucas Côrtes 2021
                </p>
        </div>
</div>

<script>
        /* osc.js */
        /* array das notas relativo ao teclado do computador*/
        notasDasTeclas = {
                65:'C3',
                87:'C3S',
                83:'D3',
                69:'D3S',
                68:'E3',
                70:'F3',
                84:'F3S',
                71:'G3',
                89:'G3S',
                72:'A3',
                85:'A3S',
                74:'B3'
        };
        /* array das notas relativo ao teclado do computador */

        /* release */
        release = $('#osc_dur').val();
        $('#osc_dur').on('change', function () {
                release = $('#osc_dur').val();
        });
        /* release */

        /* play */
        ativacao = 0;
        frequencias = [];
        $('.osc').on('click', function() {
                tocaSom(frequencias,release,$(this).attr('id').split('_')[1]);
                ativacao++;
        });
        /* play */

        /* trigger pelo teclado do computador */
        window.onkeydown = tocaNota;
        window.onkeyup = paraNota;

        function paraNota(key) {
                var keyCode = key.keyCode;
                var novasFrequencias = [];

                setTimeout(function () {
                        for (freq=0;freq<frequencias.length;freq++) {
                                frequencias[freq].stop();
                                frequencias[freq].disconnect();
                        }
                        frequencias = novasFrequencias;
                }, release+'1');

                $('#oscilador_'+notasDasTeclas[keyCode]).removeClass('ativo');
                $('#'+notasDasTeclas[keyCode]).removeClass('tocada');

        }

        function tocaNota(key) {

                if (key.repeat) {
                        // previne de retrigar direto quando holda a tecla
                        return
                }

                var keyCode = key.keyCode;

                $('#oscilador_'+notasDasTeclas[keyCode]).trigger('click');
                $('#'+notasDasTeclas[keyCode]).addClass('tocada');

                if (keyCode==38) {
                        // Arrow up
                        release = $('#osc_dur').val();
                        if (release>=5) {
                                $('#osc_dur').val(1);
                        } else {
                                $('#osc_dur').val( function(i, release) {
                                        return ++release;
                                });
                        }
                        release = $('#osc_dur').val();
                }

                if (keyCode==40) {
                        // Arrow down
                        release = $('#osc_dur').val();
                        if (release<=1) {
                                $('#osc_dur').val(1);
                        } else {
                                $('#osc_dur').val( function(i, release) {
                                        return --release;
                                });
                        }
                        release = $('#osc_dur').val();
                }

                if (keyCode==32) {
                        //Spacebar
                        if ($('#tocar').hasClass('tocando')==false) {
                                $('#tocar').trigger('click');
                        } else {
                                $('#pausar').trigger('click');
                        }
                }
        }
        /* trigger pelo teclado do computador */

        /* trigger pelo pianinho */
        $('.tecla').on('click', function () {
                nota = $(this).attr('id');
                tecladoNota = $('#oscilador_'+nota).data('teclado');

                $('#oscilador_'+nota).trigger('click');

                setTimeout(function () {
                        paraNota(tecladoNota);
                        $('#oscilador_'+nota).removeClass('ativo');
                        $('#'+tecladoNota).removeClass('tocada');
                }, release+'00');
        });
        /* trigger pelo pianinho */

        function tocaSom(frequencias,release,nota) {
                if (ativacao == 0) {
                        AudioContext = window.AudioContext || window.webkitAudioContext;
                        contexto = new AudioContext({sampleRate: 48000});

                        ganho = contexto.createGain();
                        ganho.gain.value = 0.43;
                        ganho.connect(contexto.destination);
                }

                hertz = $('#hertz_'+nota).val() * 2;
                oscilador = contexto.createOscillator();
                oscilador.frequency.setValueAtTime(hertz, contexto.currentTime);

                // custom waves
                // var real = new Float32Array([0,1,3,1,5,3,0]);
                var real = new Float32Array([13,8,5,3,2,1,1]);
                var imag = new Float32Array(real.length);
                var ondaCustomizada = contexto.createPeriodicWave(real,imag);
                oscilador.setPeriodicWave(ondaCustomizada);

                //oscilador.type = 'triangle';

                oscilador.connect(ganho);
                oscilador.start(0);

                //ganho.gain.exponentialRampToValueAtTime(0.000001, contexto.currentTime + release);

                frequencias.push(oscilador);
        } /* tocaSom */
        /* osc.js */

        /* seq.js */
        /* lista de instrumentos */
        instrumentos = [];
        $('audio').each(function() {
                instrumentos.push($(this).attr('class'));
        });
        /* pega só os unique entries do array */
        instrumentos = instrumentos.filter((x, i, a) => a.indexOf(x) == i);
        /* exemplo: instrumentos[0] = bateria */
        banda = instrumentos.length;
        /* lista de instrumentos */

        /* velocidade */
        velInput = $('#velocidade');
        velocidade = 1000 * 60 /  velInput.val();
        velInput.on('change', function () {
                if ((velInput.val() == 0) || (velInput.val() >1000)) {
                        velocidade = 1000 * 60 / 120;
                        velInput.val('120');
                } else {
                        velocidade = 1000 * 60 /  velInput.val();
                }

                if ($('#tocar').hasClass('tocando')!==false) {
                        Pausar();
                        Tocar();
                }
        });
        /* velocidade */

        /* conta os passos */
        numPassos = $('.passo').length;
        totalTics = $('.tic').length;
        ticAtual = 00;
        caminhada = 0;

        /* adiciona todos os ids dos passos num array */
        Passos = [];
        $('.passo').each(function() {
                 Passos.push($(this).attr('id').split('_')[1]);
        });

        /* ativa passo */
        $('.passo').on('click', function() {
                $(this).toggleClass('ativo');
        });
        /* ativa passo */

        /* desativa passos */
        function desativaPassos() {
                $('.passo').each(function() {
                        $(this).removeClass('ativo');
                });
        }
        /* desativa passos */

        /* desativa tics */
        function desativaTics() {
                $('.tic').each(function() {
                        $(this).removeClass('ativo');
                });
        }
        /* desativa tics */

        /* maestro */
        function Maestro() {
                desativaTics();
                $('#tic_' + Passos[batuta]).addClass('ativo');
                for (inst=0;inst<banda;inst++) {
                        if ($('#passo_' + Passos[batuta] + '.' + instrumentos[inst]).hasClass('ativo')) {
                                /* se o passo desse tic respectivo tá marcado */
                                /* toca o arquivo de som */
                                $('#audio_' + Passos[batuta] + '.' + instrumentos[inst])[0].play();
                                /* toca o osc[inst] */
                                //$('#oscplay_'+osc[inst]).trigger('click');
                        }
                }
                batuta++;
                if (batuta==numPassos) {batuta=00;}
        }
        /* maestro */

        /* move tics */
        function moveTics() {
                /* se tá pausado/parado, toca */
                if ($('#tocar').hasClass('tocando')==false) {
                        $('#pausar').removeClass('pausado');
                        batuta = ticAtual;
                        if (batuta!==00) {
                                /* arruma o contador pra continuar de onde pausou */
                                batuta = (ticAtual-1);
                        }
                        caminhada = setInterval(function(batuta) {
                                Maestro(batuta);
                        }, velocidade);
                } else {
                        /* se tá tocando */
                        $('#pausar').removeClass('pausado');
                }
        }
        /* move tics */

        /* parar os tics */
        function pararTics() {
                clearInterval(caminhada);
        }
        /* parar os tics */

        /* tocar */
        function Tocar() {
                moveTics();
                $('#tocar').addClass('tocando');
        }
        $('#tocar').on('click', function () {
                Tocar();
        });
        /* tocar */

        /* pausar */
        function Pausar() {
                pararTics();
                ticAtual = $('.tic.ativo').attr('id').split('_')[1];
                $('#tocar').removeClass('tocando');
                $('#pausar').addClass('pausado');
        }
        $('#pausar').on('click', function () {
                Pausar();
        });
        /* pausar */

        /* parar */
        function Parar() {
                pararTics();
                desativaTics();
                $('#tocar').removeClass('tocando');
                $('#pausar').removeClass('pausado');
                $('#tic_01').addClass('ativo');
                ticAtual = 00;
        }
        $('#parar').on('click', function () {
                Parar();
        });
        /* parar */

        /* limpar passos */
        function Limpar() {
                desativaPassos();
                ticAtual = 00;
        }
        $('#limpar').on('click', function () {
                Limpar();
        });
        /* limpar passos */

        /* inicializa com passos marcados */
        function randomPassos() {
                /* inicializa o array pra colocar os passos ativados */
                passosAtivados = [];
                /* pra cada tic */
                for (tic=0;passosAtivados.length<8;tic++) {
                        /* pra cada instrumento */
                        for (inst=0;inst<banda;inst++) {
                                /* pega um random dentro do total de tics */
                                Random = Math.floor(Math.random() * totalTics);
                                /* faz até dar um passo marcado pra cada tic */
                                if (passosAtivados.includes(Random)==false) {
                                        /* ativa quando for um passo que ainda não foi ativado naquele tic em nenhum instrumento */
                                        $('#passo_' + Passos[Random] + '.' + instrumentos[inst]).addClass('ativo');
                                        /* quando ativa um passo novo, coloca ele no array pra continuar ativando passos diferentes */
                                        passosAtivados.push(Random);
                                }
                        }
                }
        }
        randomPassos();
        $('#aleatorio').on('click', function () {
                Limpar();
                randomPassos();
        });
        /* inicializa com passos marcados */

        /* bota o primeiro tic aceso */
        $('#tic_01').addClass('ativo');
        /* bota o primeiro tic aceso */
        /* seq.js */
</script>

</body>
</html>
